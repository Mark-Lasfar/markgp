import{F as d}from"./kgz6t5zdmwy4qxth.js";import{ea as E,eb as I,a0 as b}from"./iqplnvvmp0uf2zth.js";import{D as i,P as t,a as o,S as l,e as S,s as A,ap as F,aE as q}from"./mignr78vkdmj74iv.js";import{i as w}from"./huv56rslu3k2orya.js";import{r as k,v}from"./isu0bb73593ln0hq.js";let s="",c="";const _=new Set,r={setSessionId(e){s=e},setQuerySessionId(e){_.clear(),c=e},logClick(e,n,a){i.addAction("fannypack.web.click",{index:n,source:a}),t.logEvent(o.fannyPackClickResult,{fanny_pack_session_id:s,fanny_pack_query_session_id:c,conversationId:e,index:n,source:a}),l.logEvent("chatgpt_fannypack_click",n,{index:String(n),source:a})},logClose(e){t.logEvent(o.fannyPackClose,{fanny_pack_session_id:s,source:e})},logOpen(e){E.count(I.DEFAULT,"conversation_search.open",[{key:"source",value:e}]),i.addAction("fannypack.web.open",{source:e}),t.logEvent(o.fannyPackOpen,{fanny_pack_session_id:s,source:e}),l.logEvent("chatgpt_fannypack_open",e)},logQuery(){i.addAction("fannypack.web.query"),t.logEvent(o.fannyPackQuery,{fanny_pack_session_id:s,fanny_pack_query_session_id:c}),l.logEvent("chatgpt_fannypack_query")},logQueryError(){i.addError("fannypack.web.query_error"),t.logEvent(o.fannyPackQueryError,{fanny_pack_session_id:s,fanny_pack_query_session_id:c})},logQueryMore(){i.addAction("fannypack.web.queryMore"),t.logEvent(o.fannyPackQueryFetchMore,{fanny_pack_session_id:s,fanny_pack_query_session_id:c}),l.logEvent("chatgpt_fannypack_query_more")},logNoResults(){t.logEvent(o.fannyPackNoResults,{fanny_pack_session_id:s,fanny_pack_query_session_id:c})},logImpression(e,n,a){_.has(a)||(_.add(a),t.logEvent(o.fannyPackImpression,{fanny_pack_session_id:s,fanny_pack_query_session_id:c,source:e,index:n,conversation_id:a}))}},h={isActive:!1,query:"",activeIndex:void 0,mouseInteractionsDisabled:!1},f=S(A(()=>({...h}))),g=f.getState,u=f.setState,K={getQuery:(e=g())=>e.query,getMouseInteractionsDisabled:()=>g().mouseInteractionsDisabled},P={setIsActive:e=>{u({isActive:e})},setQuery:e=>{u({query:e})},setActiveIndex:e=>{u(n=>{n.activeIndex=e,n.mouseInteractionsDisabled=!0})},setMouseInteractionsDisabled:e=>{u(n=>{n.mouseInteractionsDisabled=e})}};function D(e){return(w()?e.metaKey:e.ctrlKey)&&e.key==="k"}function C(){const e=F(),{isFannyPackEnabled:n}=b(),a=f(y=>y.isActive),{value:p}=q("1422501431");k.useEffect(()=>{n&&e&&(p?d.setCurrentAccountV2(e):d.setCurrentAccount(e),d.init())},[e,p,n]),k.useEffect(()=>{if(n){const y=m=>{D(m)&&(a?r.logClose("shortcut"):(r.setSessionId(v()),r.logOpen("shortcut")),P.setIsActive(!a))};return window.addEventListener("keydown",y),()=>{window.removeEventListener("keydown",y)}}},[a,n])}function Q(){P.setIsActive(!0),r.setSessionId(v()),r.logOpen("button")}const R=Object.freeze(Object.defineProperty({__proto__:null,openFannyPackSearch:Q,useInitializeFannyPackHandler:C},Symbol.toStringTag,{value:"Module"}));export{P as F,r as a,K as b,C as c,R as d,f as u};
//# sourceMappingURL=3wsqoam2tdlcwunn.js.map
